---
title: 유저모드와 커널모드 전환, 시스템 콜의 동작 원리
tags: 운영체제
article_header:
type: cover
---


## 이중모드

---

운영체제는 자원을 충돌 없이 효율적으로 사용하기 위해 자원 관리의 진입점이 된다고 말했습니다.

> 그럼 일반 응용프로그램은 어떻게 자원에 접근 할 수 있을까요?

이에 대한 답은 **이중 모드** 입니다.

<br>

![](https://raw.githubusercontent.com/jickDo/picture/master/OS/study/cp1/3/dual_mode.png)

<br>

위 사진 처럼 **CPU**가 명령을 실행하는 방식을 **사용자 모드** 와 **커널 모드**로 나누어 사용하게 됩니다.

<br>

### 사용자 모드

사용자 모드는 운영체제 서비스를 제공받을 수 없는 실행 모드입니다.
</br> CPU가 해당 모드인 경우, 입출력 명령어와 같은 하드웨어 자원 접근 명령을 실행할 수 없습니다. 일반 프로그램은 기본적으로 사용자 모드로 실행됩니다.

<br>

### 커널 모드
커널모드는 운영체제 서비스를 제공받을 수 있는 실행 모드로 커널 영역의 코드를 실행할 수 있습니다.
</br> CPU가 커널 모드로 명령어를 실행하면 자원에 접근하는 명령어를 비롯한 모든 명령어를 실행할 수 있으며, 운영체제는 커널 모드로 실행됩니다.

<br>

요약 하자면 일반 응용프로그램은 평소에 **사용자 모드**를 통해서 실행 되다가 실제 운영체제의 코드를 실행하여야 하는 순간이 오면 **커널 모드**로 전환하여 실행하다가
운영체제의 코드 실행 지점이 끝난다면 다시 **사용자 모드**로 전환되게 됩니다.

이러한 방식으로 자원을 **운영 체제**로 하여금 독자적으로 관리할 수 있게 합니다.

<br>

> 사용자 모드에서 어떻게 커널모드로 전환할까?

사용자 모드에서 커널모드로 전환하는 방식은 **시스템 콜**에 의해서 발생합니다.

<br>

![](https://raw.githubusercontent.com/jickDo/picture/master/OS/study/cp1/3/system_call.png)

<br>

그림처럼 사용자 모드로 실행되는 프로그램이 자원에 접근해야 할때 운영체제에 커널 모드로 요청을 보내게 되고 이것을 **시스템 콜**이라고 부르게 됩니다.

**시스템 호출**은 **소프트 웨어 인터럽트**에 속합니다. 이러한 특징 때문에 **CPU**가 **시스템 호출**을 처리하는 순서가 **인터럽트 처리 순서**와 비슷합니다.

**시스템 호출**이 발생하면 **지금까지의 작업을 백업** 하고, 커널 영역 내의 호출 하여야 하는 코드를 실행 한 뒤 다시 돌아와 기존 프로그램을 계속 실행합니다.

<br>

![](https://raw.githubusercontent.com/jickDo/picture/master/OS/study/cp1/3/system_call_method.png)

<br>

그림을 통해서 이해를 하게 되면,

1. 응용 프로그램은 일반적인 작업을 수행중 운영체제 코드를 실행 하여야 하는 작업에 도달하게 됩니다.
2. 그러면 응용프로그램은 운영체제에게 자원 접근에 대한 시스템 콜을 날리게 된다.
3. 현재 작업을 백업하게 됩니다.
4. 이후 응용프로그램은 운영체제의 코드를 실행합니다.
5. 작업이 끝나면 다시 사용자 영역으로 돌아와 멈춰둔 작업을 진행합니다.

이런 세부적인 순서를 진행하게 됩니다.

### 출처
[사진출처](https://hongong.hanbit.co.kr/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%9E%80-%EC%BB%A4%EB%84%90%EC%9D%98-%EA%B0%9C%EB%85%90-%EC%9D%91%EC%9A%A9-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EC%8B%A4%ED%96%89%EC%9D%84-%EC%9C%84%ED%95%9C/)

<br>
<br>
<br>
