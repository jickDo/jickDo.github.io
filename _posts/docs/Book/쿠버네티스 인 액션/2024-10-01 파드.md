---
title: 쿠버네티스의 핵심 파드
tags: 인프라 도서
article_header:
type: cover
---

## 파드란

---

**파드**는 함께 배치된 컨테이너 그룹이며, 쿠버네티스에서는 기본 빌딩 블록이다.

그렇기 때문에 컨테이너를 배포하던 도커와 달리 **파드**를 배포하게 된다.

이전에는 **파드**에 여러가지 컨테이너를 넣을 수 있다고 설명했다. 이는 맞는 말이지만 주의해야 할 점은 하나의 **파드**에
여러가지 컨테이너를 집어 넣을 수 있다고 해서 이유없이 넣는것은 좋지 못하다.

<br>
<br>

## "왜" "파드"를 최소단위로 보게 되었을까?

---

<br>

### 프로세스가 여러개일때 다중 컨테이너가 좋다.

---

예를 들어 같은 노드에서 실행되어야 하는 **프로세스**들이 있다고 가정한다. 그럼 **컨테이너**는 격리 되었고,
격리된 환경속에서 밀접한 연관을 가진 **프로세스**가 같은 컨테이너 위치에 있는게 좋은거 아닌가? 라는 생각이 든다.

하지만, 컨테이너는 애초에 단일 프로세스를 실행하는 목적으로 설계되었다.

다중 프로세스, 단일 컨테이너의 문제는 이것이다.

<br>

### 로그 관리의 어려움
다중 프로세스를 단일 컨테이너로 띄우게 되면 모든 로그 관리를 사용자가 관리하고 책임져야 한다. 즉 로그 설계, 괸리
등의 복잡도가 올라가는 것이다.

<br>
<br>

## 파드 이해하기

---

이전까지는 **다중 프로세스** 사용시 **단일 컨테이너**환경을 피해야 하는 이유에 대한 설명이 었다.

하지만, **파드**의 필요성에 대해서는 설명하지 못했다.

조금 전 이야기를 바탕으로 **다중 프로세스**는 **다중 컨테이너**로 나누는 것이 좋다는 결론이 나온다.
이제 컨테이너가 여러개로 늘어났기 때문에 다시 이들을 관리할 상위 집합이 필요해졌다.

이것이, **파드**의 필요성이다.

결국 컨테이너 모음을 사용해 밀접하게 연관된 프로세스를 함께 실행하고 단일 컨테이너 안에서 모두 함께 실행되는 것처럼
동일한 관경을 제공할 수 있으면서, 이들을 격리시키는 기능을 제공한다.

요약하자면 **파드**는 컨테이너의 **격리성**을 제공함과 동시에 **격리**된 **프로세스**들이 마치 하나의 **프로세스**처럼 보이게 한다.

<br>
<br>

## 파드간 플랫 네트워크

---

쿠버네티스 내부 모든 파드는 하나의 **플랫** 한 공유 네트워크 주소 공간에 상주하므로, 모든 파드는 다른 파드의 **IP**주소를 사용해 접근하는것이 가능하다.
두 파드가 서로 네트워크 패킷을 보내면, 상대방의 실제 **IP** 주소를 패킷 안에 있는 출발지 **IP** 주소에서 찾을 수 있다.

파드 사이의 통신은 어떤 워커노드에 있는지 중요하지 않으며, 양측 모두 **파드** 인경우 서로 통신이 언제든 가능하다.

<br>
<br>

## 파드에서 컨테이너의 적절한 구성

---

**파드**는 상대적으로 가볍기 때문에 **오버헤드**없이 필요한 만큼 파드를 가질 수 있다. 그렇기 때문에 하나의 **파드**의 모든것을 넣는거 보다
여러 **파드**에 어플리케이션을 분리하고, 각 파드에는 밀접하게 관련 있는 구성 요소나 프로세스만 포함하는 것이 좋아보인다.

<br>
<br>

다계층 어플리케이션을 여러 **파드**로 나눠야 하는 이유에 대해서 말해보겠다.

<br>

### 1. 다계층 어플리케이션을 여러 파드로 분할

---

프론트 엔드 서버와 데이터베이스 컨테이너 두 개로 구성된 에플리 케이션이 있을 때 이들을 같은 머신에서
실행할 이유는 없다. 즉 다른 파드로 나눠서 올리는 것이 좋다.

추가적으로 클러스터에 할당 된 리소스가 있을것인데, 이렇게 하나의 파드에 에플리케이션을 몰아두었을 때 리소스를
적절하게 사용하지 못하기 때문에 추천하지 않는다.

<br>
<br>

### 2. 개별 확장이 가능하도록 여러 파드로 분할

---

쿠버네티스의 스케일링의 기본 단위는 **파드**이다. 컨테이너를 수평으로 확장할 수 없다. 대신 전체 파드를 수평으로 확장한다.
즉 스케일링 가능성이 특정 **파드**에 존재한다면, 파드를 **단일 컨테이너**에 배포하여야 한다.

<br>
<br>

여기까지는 프로세스를 다중 컨테이너로 나눠서 다중 파드에 배포하라고 설명하였지만,

사실 하나의 파드에서 **다중 컨테이너**를 사용하는 경우가 있다.

<br>

### 하나의 파드에서 다중 컨테이너를 사용하는 경우

---

여러 컨테이너를 단일 파드에 넣는 주된 이유는 하나의 프로세스와 하나 이상의 보완 프로세스로 구성된 경우이다.
서로 밀접하게 연관을 주고 받는 컨테이너들에 한해, 하나의 파드로 이용하기도 한다.

<br>
<br>
<br>

## 파드를 정의하는 주요 부분 소개

---

파드 정의는 쿠버네티스 리소스가 가지는 세가지 중요한 부분으로 정의를 나눌수있다.

1. Metadata: 이름, 네임스페이스, 레이블 및 파드에 관한 기본정보
2. Spec: 파드 컨테이너, 볼륨, 기타 데이터 등 파드 자체에 관한 실제 명세를 가진다.
3. Status: 파드 상태, 각 컨테이너 설명과 상태, 파드 내부 IP, 기타 기본 정보 등 현재 실행중인 파드에 관한 현재 정보를 포함한다.

<br>
<br>























