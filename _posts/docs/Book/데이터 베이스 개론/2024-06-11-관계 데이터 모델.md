---
title: 관계 데이터 모델의 개념
tags: 데이터베이스 도서
article_header:
type: cover

[//]: # (excerpt: 책을 통해 학습한 내용을 바탕으로 E-R모델을 알아보고, 키에 대해 정리합니다.)
---
# [1] 관계 데이터 모델의 개념

---

## 관계 데이터 모델의 기본 용어

---

### 1. 릴레이션
> 릴레이션이란 관계 데이터 모델에서 하나의 개체에 관한 데이터를 담아서 저장하는데 그것이 **릴레이션**이다.

<br>

### 2. 속성
> 릴레이션의 열을 **속성** 또는 **에트리뷰트** 라고 부른다. 각 속성은 서로 다른 이름으로 구별해야 한다.

<br>

### 3. 투플
> 릴레이션의 행을 **투플**이라고 한다. **개체 인스턴스** 라고 부를수도 있다.

<br>

### 4. 도메인
> 속성 하나가 가질 수 있는 모든 값의 집합을 해당 속성의 **도메인**이라고 한다. 회원 등급에 해당하는 속성에 올 수 있는 값이
> GOLD, SILVER, BLONZE 가 가능할떄, 3가지의 값이 회원 등급의 도메인이다.
>
> 회원 등급의 경우 ENUM값으로 관리가 가능하지만 일반적인 속성은 **데이터 타입** 즉 **자료형**이라고 생각하면 된다.

<br>

### 5. 차수
> 하나의 릴레이션에서 속성의 전체 개수를 **차수**라고 한다.

<br>

### 6. 카디널리티
> 하나의 릴레이션에서 투플의 전체 개수를 **카디널리티** 라고 한다.

<br><br>

## 릴레이션과 테이터베이스의 구성

관계 데이터 모델에서 릴레이션은 **릴레이션 스키마** 와 **릴레이션 인스턴스**로 구분가능하다.

<br>

### 릴레이션 스키마

> 릴레이션이름(속성이름1, 속성이름2, ..., 속성이름n)

**릴레이션 스키마**는 릴레이션의 이름과 릴레이션에 포함된 모든 속성의 이름으로 정의하는 릴레이션의 논리적 구조이다.

<br>

### 릴레이션 인스턴스

**릴레이션 인스턴스**는 어는 한 시점에 릴레이션에 존재하는 투플들의 집합이다.


> 릴레이션 스키마는 정적인 특징이 있고, 릴레이션 인스턴스는 동적인 특징이 있다.

<br><br>

## 릴레이션의 특성

---

릴레이션은 주요한 네 가지 특징이 있다.

### 1. 투플의 유일성
>  하나의 릴레이션에는 동일한 투플이 존재할 수 없다.
>> **키**를 이용해서 구분하게 된다.
### 2. 투플의 무순서
> 하나의 릴레이션에서 투플 사이의 순서는 의미가 없어야 한다.

### 3. 속성의 무순서
> 하나의 릴레이션에서 속성 사이의 순서는 의미가 없어야 한다.

### 4. 속성의 원자성
> 속성 값은 더 분해할 수 없는 원자값만 허용한다. 다중값을 허용하지 않는다.

<br><br>

## 키의 종류

> 키(key) : 투플을 유일하게 구별하기 위해 사용하는 속성

관계 데이터 모델에서는 키를 다섯 가지로 분류한다.


## 키의 분류하는 특성

---

<br>

### 1. 유일성
> 하나의 릴레이션에서 키로 지정된 속성 값은 투플마다 달라야 한다.
>
> 다른 투플에 같은 값이 올 수 있다면 그것은 유일성을 만족하지 못한다.

### 2. 최소성
> 꼭 필요한 최소한의 속성들로만 키를 구성하는 특성이다.
>
> 회원 아이디라는 키와 (회원 거주지 + 회원 이름)를 합친 키가 있다면 회원 아이디가 한개의 속성을 요구하기 때문에 후자보다 최소성을
> 더욱 만족한다.

<br><br>

## 다섯 가지의 키 종류

---

## 1. 슈퍼키

> 키를 분류하는 특성중 **유일성**을 만족하는 모든 키

슈퍼키를 만족하는지 확인하기 위해서는 **유일성** 을 고려해보면 된다.

유일성을 보장할 수 있다면 복수개의 속성의 집합또한 키가 될 수 있다.

### 단, 미래에 상황까지 고려 하여야 한다.

> 현재 상황에서 유일성을 보장한다고 **슈퍼키** 인것은 아니다.

예를 하나 들자면, 현재 20가지의 투플이 있고 회원 이름에 중복이 없는 릴레이션이 있다고 가정한다.
하지만, 사람 이름은 언제든 중복이 발생할 수 있다. 그렇기 때문에 회원명은 **유일성** 을 만족할 수 없다.

<br>

## 2. 후보키

> **유일성**, **최소성**을 만족하는 모든 키

후보키를 만족하는지 확인하기 위해서는 **유일성**와 **최소성**을 고려해보면 된다.

예를 들어 (고객아이디, 회원이름)을 키로 사용할 수 있다. 왜냐하면 (고객아이디, 회원이름)을 이용하면 두개의 튜플이 다른것을 증명할 수 있기
때문이다.

### 그럼 후보키가 가능한가요?

(고객아이디, 회원이름)은 후보키가 될 수 없다.

이유는, (고객아이디)로만 키의 역할을 할 수 있기 때문에 (고객아이디, 회원이름)은 **최소성**을 만족하지 못한다.

<br>

## 3. 기본키

> 후보키들 중 기본적으로 사용할 키

기본키는 후보키중에서 실제로 사용할

즉, 튜플간의 구분에 사용할 키를 **기본키**라고 한다.

<br>

## 기본키를 선택할 때 고려하면 좋은 기준

<br>

### 1. 기본키는 널 값을 가지면 안된다.

>기본키는 튜플을 식별하고, 원하는 튜플을 찾는데 사용된다.
>
> 기본키가 널이면 다른 투플과 구분할 방법도, 투플에 접근할 방법도 없어진다.

### 2. 기본키는 값이 자주 변경되지 않는 값이면 좋다.

> 기본키를 구성하기 위해서는 널x, 최소성, 유일성등 고려하여야 하는 점들이 있다. 기본키가 자주 변경된다면 기본키의 유효성을 매번
> 검사하여야 한다.


### 3. 단순한 후보키를 기본키로 선택한다.

> 단순하다는 자릿수가 적은 정수나, 단순 문자열, 혹은 키를 구성하는 속성의 개수가 적은것을 의미한다.


<br>

## 4. 대체키

> 기본키로 선택되지 못한 후보키

<br>

## 5. 외래키

> 어떤 릴레이션에 소속된 속성 또는 속성 집합이 다른 릴레이션의 기본키(대체키)가 되는 키

외래키는 자신 혹은 다른 릴레이션의 기본키를 가지고 있다. 물론, 기본키가 아닌 대체키도 가능하지만 보통은 기본키로 가지고 있는 경우가 많다.

외래키에서 주의 해야할 점은, 두가지가 있다고 생각한다.

### 1. 외래키는 자신의 릴레이션의 속성을 참조할 수 있다.

### 2. 외래키는 NULL일수 있다.

<br><br>

# [2] 관계 데이터 모델의 제약

---

## 무결성

> 무결성은 데이터에 결함이 없는 상태, 정확하고 유효한 값잉 유지된 상태

관계 데이터 모델에서 정의하는 기본적인 제약사항은 **키**와 관련된 **무결성**이다.

<br>

## 무결성 제약조건

---

### 1. 개체 무결성 제약조건

> 기본키를 구성하는 모든 속성은 널 값을 가지면 안 된다.

기본키가 널이게 되면, 튜플간의 다르다는 판단을 하지 못한다.

<br>

### 2. 참조 무결성 제약조건

> 외래키는 참조할 수 없는 값을 가지면 안 된다.

외래키는 참조할 수 없는 값을 가지게 되면 두개의 릴레이션을 연관시킬 수 없다. 즉, 본래의 의미를 잃어버린다.

<br>

### Q. 개체 무결성 제약에서는 **기본키**가 NULL이면 안된다고 했는데, 참조 무결성 제약조건에서는?

> 참조할 대상이 누군지 모를뿐, 존재하지 않는다는 것으로 판단하기 어렵기 때문에 외래키는 NULL을 허용한다.

<br>


### Q. 삭제 되는 투플을 외래키로 가지고 있으면 어떻게 처리해야 하나?

> 무결성 제약조건은 현재의 상태뿐만 아니라, 이후에 상태에서도 무결성을 유지할 수 있어야 한다. 이말은 값이 추가 되거나, 삭제 되어도 무결성을 유지할 수 있어야 한다는 말이다.
>
> 즉, 참조 무결성 제약조건을 생각했을 때 외래키가 참조할수 없어진 경우는 NULL 혹은 기본값으로 대체하는 방식을 사용해야 한다.



