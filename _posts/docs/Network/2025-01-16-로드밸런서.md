---
title: L4로드밸런서와 L7로드밸런서
tags: 네트워크
article_header:
type: cover
---

# 로드밸런서란?

---

트래픽이 많은 서비스에서 뒷단의 여러 서버로 부하를 분산시켜주는 장비를 **로드밸런서**라고 한다.

이러한 로드밸런서는 4계층 에서 이용되는 **L4 로드밸런서**와 7계층에서 에용되는 **L7 로드밸런서**가 있다.

<br>
<br>

## L4 로드밸런서

---

<br>

<img src="https://raw.githubusercontent.com/jickDo/picture/master/Network/study/3주차/l4.png" width="800" height="400" alt="">

<br>

L4 로드밸런싱은 **IP** 와 **PORT**를 활용하여 서버의 부하를 분산시키는 장비입니다. 또한, TCP 혹은 UDP를 상황에 맞게
선택하거나 모두 선택하는것이 가능합니다.

<br>
<br>
<br>

## L7 로드밸런서

---

<img src="https://raw.githubusercontent.com/jickDo/picture/master/Network/study/3주차/l7.png" width="800" height="500" alt="">

<br>

애플리케이션 계층에서 분산하기 때문에 HTTP 헤더, 쿠키 등과 같은 사용자의 요청을 기준으로 특정 서버에 트래픽을 분산하는 것이 가능하다.
쉽게 말해 패킷의 내용을 확인하고 그 내용에 따라 로드를 특정 서버에 분배하는 것이 가능한 것이다.
위 그림과 같이 URL에 따라 부하를 분산시키거나, HTTP 헤더의 쿠키값에 따라 부하를 분산하는 등 클라이언트의 요청을 보다 세분화해 서버에
전달할 수 있다.

<br>
<br>

## L4 vs L7

---

| 구분      | L4 로드밸런서                                                                                                         | L7 로드밸런서                                                                                                              |
|---------|------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| 네트워크 계층 | Layer 4<br>전송계층(Transport layer)                                                                                 | Layer 7<br>응용계층(Application layer)                                                                                    |
| 특징      | TCP/UDP 포트 정보를 바탕으로 함                                                                                            | TCP/UDP 정보는 물론 HTTP의 URI, FTP의 파일명, 쿠키 정보 등을 바탕으로 함                                                                   |
| 장점      | • 데이터 안을 들여다보지 않고 패킷 레벨에서만 로드를 분산하기 때문에 속도가 빠르고 효율이 높음<br>• 데이터의 내용을 복조하지 않고자 한기 때문에 안전함<br>• L7 로드밸런서보다 가격이 저렴함 | • 상위 계층에서 로드를 분산하기 때문에 훨씬 더 섬세한 라우팅이 가능함<br>• 캐싱 기능을 제공함<br>• 비정상적인 트래픽을 사전에 필터링할 수 있어 서비스 안정성이 높음                    |
| 단점      | • 패킷의 내용을 살펴볼 수 없기 때문에 섬세한 라우팅이 불가능함<br>• 사용자의 IP가 수시로 바뀌는 경우라면 연속적인 서비스를 제공하기 어려움                               | • 패킷의 내용을 복호화하여 하기에 더 높은 비용을 지불해야 함<br>• 클라이언트가 로드밸런서와 인증서를 공유해야하기 때문에 공격자가 로드밸런서를 통해서 클라이언트의 데이터에 접근할 보안 상의 위험성이 존재함 |

<br>
<br>
<br>

[참고한 레퍼런스1](https://aws-hyoh.tistory.com/149)

<br>
<br>
<br>
