---
title: 대표적인 웹 취약 해킹기법과 대응법
tags: 네트워크
article_header:
type: cover
---

오늘 설명하고자 하는 대표적인 해킹기법은 **XSS**, **CSRF**, **SQL Injection**입니다.

<br>
<br>

# XSS(Cross Site Script)

---

웹 클라이언트에 자바스크립트 와 같은 **스크립트**를 실행할 수 있는 코드를 삽입하여 다른 사용자들에게 공격자의 의도대로

공격을 하는 수법을 **XSS**라고 한다. 이는 특정 사용자가 특정 사이트를 신뢰하는 점을 이용하는 것입니다.

**XSS**는 공격자가 함정을 설치하고 기다린다고 하여 **수동적 공격**이라고 부르기도 합니다.

아래와 같은 예시로 공격할 수 있습니다.

<br>

1. 가짜 입력 폼 등에 의해 유저의 개인 정보를 도둑 맞는다
2. 스크립트에 의해 유저의 쿠키 값이 도둑맞거나 피해자가 의도치 않은 요청을 보내게 된다.
3. 가짜 문장이나 이미지를 표시한다.

<br>

## XSS의 대표적인 공격수단 3가지

---

**XSS**의 대표적인 공격방식은 3가지가 존재합니다.

### 1. Reflected XSS

### 2. Stored XSS

### 3. DOM XSS

차례대로 알아보겠습니다.

<br>
<br>

## 1. Reflected XSS

---

비지속적 기법이라고도 부르며, **악성 스크립트**가 웹 어플리케이션에서 피해자에게 반산될때 실행되는 해킹 기법입니다.

공격자가 조작된 **URI**링크를 배포하고 피해자가 이것을 눌렀을 때, 공격자가 원하는 사이트에 접근하거나, 세션 값을 탈취 하는 행위를 하게
됩니다.

<br>
<br>

## 2. Stored XSS

---

저장형 방식이라고도 하며, 공격자가 서버에 악의적인 스크립트를 담은 댓글이나 게시글을 저장시키며 진행됩니다.

다른 사용자가 악의적인 스크립트가 든 댓글이나, 게시글을 보게되면 스크립트가 실행되어, 쿠키나 토큰등을 탈취하는 방법을 말하게 됩니다.

<br>
<br>

## 3. DOM XSS

---

DOM 구조를 이용해서 요소들을 변경하는 동적인 행동을 할때 접근하는 JS코드에 악성 스크립트를 삽입하여 클라이언트 측 브라우저에서 악성 스크립트를 실행하는 기법입니다.

<br>
<br>

## XSS 방지법

---

1. 정규 표현식을 사용해 특수문자 입력 방지
2. 특수문자를 문자열로 치환하기
3. 쿠키에 HTTPOnly 속성 달기

<br>
<br>

# CSRF(Cross Site Request Forgeries)

---

**CSRF**란 사이트간 위조 요청이며 대표적인 웹 취약점중 하나입니다. 사용자가 의도하지 않은 요청이 실행됩니다.

즉, 일반사용자가 자신의 의도와는 상관없이 서버를 공격하는 행위입니다.

이는 특정 서버가 특정 사용자를 신뢰한다는 점을 이용하는 방식입니다.

<br>
<br>

## CSRF 전제조건

---

**CSRF**는 피해자의 인증수단을 이용하는 해킹 수법인 만큼 해킹을 위한 사전 조건이 필요합니다.

1. 사용자는 특정사이트에 로그인이 되어있어야 한다.
2. 특정 사이트는 쿠키기반 세션 관리를 진행한다.
3. 공격자는 서버를 공격하기 위한 요청 방법에 대해 미리 파악하고 있어야 한다.

위 세가지 과정이 만족되면 그 사이트는 **CSRF**공격 가능성이 존재하는 사이트가 된다.

<br>
<br>

## CSRF 공격 플로우

---

사용자는 **CSRF** 공격 가능성이 있는 서버에 접속하게 되면, 서버는 세션을 생성하고 쿠키에 세션ID를 담아서 사용자에게 전달할것입니다.

공격자는 악성 스크립트가 담긴 페이지를 누르게 유도합니다.

방법은 다양하지만 게시글에 악성 스크립트를 담을 수도있고, 인증메일에 넣을 수도 있고 다양한 방식으로 유도할수 있습니다.

그렇게 되면 사용자가 악성 페이지에 접속하게 되고, 그 페이지에는 공격을 하는 HTTP 요청 스크립트가 존재하고 거기에 더해 사용자의 세션키가 담긴 쿠키정보와 함깨 전송됩니다.

결국 사용자가 접속한 악성 페이지에서 악의적인 요청을 원래 보안 취약서버로 보내게 되고 이러한 공격 방식이 **CSRF**방식입니다.

<br>
<br>

## CSRF 방지법

---

1. referrer헤더와 host헤더의 비교
2. 쿠키, 세션 방식 사용안함(토큰사용고려)
3. 쿠키 설정값에 samesite를 true로 변경해서 퍼스트 파티 쿠키로 변경

<br>
<br>

# SQL Injection

---











[참고한 레퍼런스](https://bziwnsizd.tistory.com/89)
